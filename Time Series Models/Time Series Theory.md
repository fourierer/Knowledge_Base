## Time Series Theory



### 一、基本概念

#### 1.不同数据类型

横截面数据：同一时间点，不同对象的数据；

时间序列：不同时间点，同一对象的数据；

面板数据：同时具有多个时间，多个对象的数据；



时间序列模型基于假设：历史可重演，未来数据可以由历史数据推断出来。



#### 2.变量定义

（1）时间序列变量 $y$ 在时间上的观测记为 $y_t$ ，总观测次数记为 $T$，也称为样本容量；

（2）观测间隔称为数据的频率，例如日，周，月和年等；

（3）变量 $y_t$ 在 $t-1$ 时刻的取值 $y_{t-1}$ 称为一阶滞后变量，$y_{t-k}$ 称为 $k$ 阶滞后变量；

（4）$y_t-y_{t-1}$称为一阶差分，用 $\Delta_t$ 表示；



#### 3.平稳的时间序列

（1）概述：随着时间的变化，观测对象的分布不发生变化，表现为围绕某一个值上下波动，即 $E(y_t)=\mu$ ，其中 $\mu$ 是与时间无关的常数。

（2）严格定义

对随机过程 $\{X_t,t\in T\}$，取定 $t,s\in T$ ，定义其自协方差函数为：
$$
\begin{align}
\gamma_{t,s}&=Conv(X_t,X_s)\\
&=E[(X_t-\mu_t)(X_s-\mu_s)]
\end{align}
$$
设随机序列 $\{X_t,t=0,\pm1,\pm2,...\}$，满足：
$$
\begin{align}
&(1)E(X_t)=\mu;\\
&(2)\gamma_{t+k,t}=\gamma_k,(k=0,\pm1,\pm2,...),与t无关，只与间隔有关;
\end{align}
$$
 则称 $\{X_t\}$为平稳随机序列，简称平稳序列。

 （3）现实场景中有现成函数可以直接调用来验证是否为平稳时间序列，不需要自己逐条验证。

（4）平稳白噪声序列：平稳白噪声序列的方差是常数 $\sigma^2$，因为 $\gamma_k=0(k\neq0)$ ，所以 $\epsilon_t$ 的任意两个不同时点之间是不相关的。



### 二、ARMA时间序列

介绍一种重要的平稳时间序列：ARMA时间序列，ARMA时间序列可分为三种类型：AR，MA，ARMA。

#### 1.AR序列（自回归序列，Auto Regressive Model）

假设 $\{X_t,t=0,\pm1,\pm2,...\}$是平稳序列，满足：
$$
X_t=\phi_1X_{t-1}+\phi_2X_{t-2}+...+\phi_pX_{t-p}+\epsilon_t
$$
式中：$\epsilon_t$是平稳白噪声；$X_t$为阶数为$p$的自回归序列，简记为$AR(p)$序列；$\phi$为自回归参数向量，且
$$
\phi=[\phi_1,\phi_2,...,\phi_p]^T
$$
称为自回归系数。





#### 2.MA序列（移动平均序列，Moving Average Model）

假设 $\{X_t,t=0,\pm1,\pm2,...\}$是平稳序列，满足：
$$
X_t=\epsilon_t-\theta_1\epsilon_{t-1}-\theta_2\epsilon_{t-2}-...-\theta_q\epsilon_{t-q}
$$
式中：$\epsilon_t$是平稳白噪声；$X_t$为阶数为$q$的移动平均序列，简记为$MA(q)$序列；$\theta$为移动平均参数向量，且
$$
\theta=[\theta_1,\theta_2,...,\theta_q]^T
$$
称为移动平均系数。

注：如果一个输出是白噪声的线性叠加，那么这一输出服从MA模型。





#### 3.ARMA序列（自回归移动平均序列，Auto Regressive Moving Average Model）

假设 $\{X_t,t=0,\pm1,\pm2,...\}$是平稳序列，满足：
$$
X_t-\phi_1X_{t-1}-\phi_2X_{t-2}-...-\phi_pX_{t-p}=\epsilon_t-\theta_1\epsilon_{t-1}-\theta_2\epsilon_{t-2}-...-\theta_q\epsilon_{t-q}
$$
式中：$\epsilon_t$是平稳白噪声；$X_t$为阶数为$p,q$的自回归移动平均序列，简记为$ARMA(p,q)$序列。





#### 4.ARMA模型的构建及预报

在实际问题建模中，需要进行模型的识别与定阶，随后进行模型的参数估计。

$ARMA(p,q)$序列的AIC准则为：选择$p,q$使得$min AIC=nln\sigma^2_\epsilon+2(p+q+1)；确定阶数后，再估计自回归系数和移动平均系数。







### 三、ARIMA（差分自回归移动平均）序列

差分运算可以使一类非平稳序列（即带有趋势性的序列）平稳化。如果一阶差分还不能使时间序列平稳化，还可以进行二阶差分、三阶差分，直至$d$阶差分，最后将序列转化为平稳序列。

一阶差分：
$$
\nabla X_t=X_t-X_{t-1}=(1-B)X_t
$$
二阶差分：
$$
\nabla^2X_t=X_t-2X_{t-1}+X_{t-2}=(1-B)^2X_t
$$
$d$阶差分：
$$
\nabla^dX_t=(1-B)^dX_t
$$
$\nabla^d$称为$d$阶差分算子，有
$$
\nabla^d=(1-B)^d=1-C_d^1B+C_d^2B^2+...+(-1)^{d-1}C^{d-1}_dB^{d-1}+(-1)^dB^d
$$
其中$B^dX_t$表示$X_{t-d}$。

设 $\{X_t,t=0,\pm1,\pm2,...\}$是非平稳序列，若存在正整数$d$，使得
$$
\nabla^dX_t=W_t
$$
而 $\{W_t,t=0,\pm1,\pm2,...\}$是$ARMA(p,q)$序列，则称$X_t$是$ARIMA(p,d,q)$序列。







### 四、季节性序列

由季节性因素或其他周期因素引起的周期变化的时间序列，称为季节性时间序列。

一般地，对于周期$s$的序列，可先进行差分运算，即
$$
\nabla_sX_t=(1-B^s)X_t\\
\nabla_s^d=(1-B^s)^dX_t
$$
然后在进行$ARIMA$建模。



### 五、机器学习





### 六、深度学习

















